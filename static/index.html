<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Shepherd - Gamified Log Monitoring</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="title-section">
                    <h1 class="main-title">üêë Server Shepherd</h1>
                    <p class="subtitle">Gamified Log Monitoring Dashboard</p>
                </div>
                <div class="status-section">
                    <div class="status status--success">
                        <span class="status-dot"></span>
                        System Online
                    </div>
                    <div class="uptime">
                        <strong>Uptime:</strong> <span id="uptime"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Dashboard -->
        <div class="dashboard-grid">
            <!-- Metrics Panel -->
            <section class="metrics-panel card">
                <div class="card__header">
                    <h2>Server Health Metrics</h2>
                </div>
                <div class="card__body">
                    <div class="metrics-grid">
                        <div class="metric">
                            <label>CPU Usage</label>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="0"></div>
                            </div>
                            <span class="metric-value">0%</span>
                        </div>
                        <div class="metric">
                            <label>Memory</label>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="0"></div>
                            </div>
                            <span class="metric-value">0%</span>
                        </div>
                        <div class="metric">
                            <label>Disk Space</label>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="0"></div>
                            </div>
                            <span class="metric-value">0%</span>
                        </div>
                        <div class="metric">
                            <label>Network</label>
                            <div class="progress-bar">
                                <div class="progress-fill" data-progress="0"></div>
                            </div>
                            <span class="metric-value">0%</span>
                        </div>
                        <div class="metric-summary">
                            <div class="total-logs">
                                <strong>Total Logs:</strong>
                                <span id="totalLogs" class="animated-counter">0</span>
                            </div>
                            <div class="error-logs">
                                <strong>Error Logs:</strong>
                                <span id="errorCounter" class="animated-counter">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sheep Visualization Area -->
            <section class="sheep-area card">
                <div class="card__header">
                    <h2>Log Shepherd Field</h2>
                    <div class="sheep-legend">
                        <span class="legend-item"><span class="legend-dot info"></span>INFO</span>
                        <span class="legend-item"><span class="legend-dot warning"></span>WARNING</span>
                        <span class="legend-item"><span class="legend-dot error"></span>ERROR</span>
                        <span class="legend-item"><span class="legend-dot critical"></span>CRITICAL</span>
                    </div>
                </div>
                <div class="card__body sheep-field" id="sheepField">
                    <!-- Sheep will be dynamically added here -->
                </div>
            </section>

            <!-- Gamification Panel -->
            <section class="gamification-panel card">
                <div class="card__header">
                    <h2>Shepherd Progress</h2>
                </div>
                <div class="card__body">
                    <div class="score-section">
                        <div class="score-display">
                            <span class="score-value" id="currentScore">0</span>
                            <span class="score-label">Points</span>
                        </div>
                        <div class="level-display">
                            <span class="level-value" id="currentLevel">Level 8</span>
                            <span class="level-name" id="levelName">Log Wrangler</span>
                        </div>
                    </div>
                    
                    <div class="badges-section">
                        <h3>Badges Earned</h3>
                        <div class="badges-grid" id="badgesGrid">
                            <div class="badge earned">ü•â Shepherd Novice</div>
                            <div class="badge earned">‚ö†Ô∏è First Alert</div>
                            <div class="badge earned">‚ùå Error Handler</div>
                            <div class="badge locked">‚ö° Warning Specialist</div>
                        </div>
                    </div>

                    
                </div>
            </section>

            <!-- Leaderboard -->
            <section class="leaderboard card">
                <div class="card__header">
                    <h2>Top Shepherds</h2>
                </div>
                <div class="card__body">
                    <div class="leaderboard-list" id="leaderboard">
                        <!-- Leaderboard will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Log Activity Feed -->
            <section class="activity-feed card">
                <div class="card__header">
                    <h2>Recent Log Activity</h2>
                </div>
                <div class="card__body">
                    <div class="log-entries" id="logEntries">
                        <!-- Log entries will be dynamically added -->
                    </div>
                </div>
            </section>

            <!-- Control Panel -->
            <section class="control-panel card">
                <div class="card__header">
                    <h2>Log Simulation Controls</h2>
                </div>
                <div class="card__body">
                    <div class="control-buttons">
                        <button class="btn btn--secondary" onclick="simulateBackendLog('INFO')">
                            Generate INFO Log
                        </button>
                        <button class="btn btn--secondary" onclick="simulateBackendLog('WARNING')">
                            Generate WARNING
                        </button>
                        <button class="btn btn--secondary" onclick="simulateBackendLog('ERROR')">
                            Generate ERROR
                        </button>
                        <button class="btn btn--primary" onclick="simulateBackendLog('CRITICAL')">
                            Generate CRITICAL
                        </button>
                    </div>

                    <div class="auto-mode">
                        <label class="form-label">
                            <input type="checkbox" id="autoMode" onchange="toggleAutoMode()">
                            Auto-generate logs
                        </label>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Tooltip for sheep details -->
    <div id="tooltip" class="tooltip hidden">
        <div class="tooltip-content">
            <div class="tooltip-header">
                <span class="tooltip-level"></span>
                <span class="tooltip-time"></span>
            </div>
            <div class="tooltip-message"></div>
            <div class="tooltip-server">
                <strong>Server:</strong> <span class="server-name"></span>
            </div>
            <div class="tooltip-service">
                <strong>Service:</strong> <span class="service-name"></span>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>

    <script src="/static/backend_integration.js"></script>

    <script>
    // Uptime calculation script
    const serverStartTime = new Date('2025-10-01T08:00:00Z'); // Set your actual server start time here

    function updateUptime() {
        const now = new Date();
        let diff = Math.floor((now - serverStartTime) / 1000);

        const days = Math.floor(diff / (3600 * 24));
        diff -= days * 3600 * 24;
        const hours = Math.floor(diff / 3600);
        diff -= hours * 3600;
        const minutes = Math.floor(diff / 60);

        let uptimeStr = '';
        if (days > 0) uptimeStr += `${days} day${days > 1 ? 's' : ''}, `;
        if (hours > 0 || days > 0) uptimeStr += `${hours} hour${hours > 1 ? 's' : ''}`;
        if (days === 0) uptimeStr += `, ${minutes} min${minutes > 1 ? 's' : ''}`;

        document.getElementById('uptime').textContent = uptimeStr;
    }

    updateUptime();
    setInterval(updateUptime, 60000); // Update every minute
    </script>
</body>
</html>